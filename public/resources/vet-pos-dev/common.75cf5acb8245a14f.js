"use strict";(self.webpackChunkvet_pos_dev=self.webpackChunkvet_pos_dev||[]).push([[76],{7175:(C,S,i)=>{i.d(S,{$:()=>v});let r="",a="",u="",f="";"development"==("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname?"development":"production")?(r="http://vetpos.local:84",a=`${r}/public/`,u=`${r}/api`,f=`${r}/public/payment`):(r=window.location.origin,a=`${r}/resources/`,u=`${r}/api`,f=`${r}/payment`);let v=(()=>{class ${static{this.base_url="https://vet-pos-system-1.onrender.com"}static{this.assets_url="https://vet-pos-system-1.onrender.com/resources/"}static{this.apiUrl="https://vet-pos-system-1.onrender.com/api"}static{this.paymentUrl="https://vet-pos-system-1.onrender.com/payment"}static{this.environment="production"}static{this.production=!0}}return $})()},8010:(C,S,i)=>{i.d(S,{u:()=>T});var l=i(4412),r=i(8810),a=i(8141),u=i(9437),f=i(6354),v=i(7175),$=i(4438),g=i(1626);let T=(()=>{class o{constructor(t){this.http=t,this._user$=new l.t(null),this.apiUrl=`${v.$.apiUrl}/auth`,this.navigationReloadSource=new l.t(!1),this.navigationReload$=this.navigationReloadSource.asObservable();const c=localStorage.getItem("user");c&&this._user$.next(JSON.parse(c))}get user$(){return this._user$.asObservable()}setUser(t){this._user$.next(t),localStorage.setItem("user",JSON.stringify(t)),localStorage.setItem("roles",JSON.stringify(t.roles||[])),localStorage.setItem("permissions",JSON.stringify(t.permissions||[])),t.token&&localStorage.setItem("token",t.token)}get currentUser(){return this._user$.value}login(t){return this.http.post(`${this.apiUrl}/login`,t).pipe((0,a.M)(c=>{if("success"===c.status&&c.data?.user&&c.data?.token){const _={...c.data.user.user,roles:c.data.user.roles,permissions:c.data.user.permissions,token:c.data.token};localStorage.setItem("user",JSON.stringify(_)),localStorage.setItem("token",c.data.token),this._user$.next(_)}}),(0,u.W)(c=>(0,r.$)(()=>c)))}getToken(){return localStorage.getItem("token")}storeUser(t){localStorage.setItem("user",JSON.stringify(t)),t.token&&localStorage.setItem("token",t.token),this._user$.next(t)}me(){return this.http.get(`${this.apiUrl}/me`).pipe((0,a.M)(t=>{t?.user&&this.storeUser(t.user)}),(0,f.T)(t=>t?.user??null),(0,u.W)(t=>(console.warn("Failed to fetch profile:",t),this.clearSession(),(0,r.$)(()=>t))))}logout(){return this.http.post(`${this.apiUrl}/logout`,{}).pipe((0,a.M)(()=>this.clearSession()),(0,u.W)(t=>(console.warn("Logout failed, clearing local session anyway"),this.clearSession(),(0,r.$)(()=>t))))}register(t){return this.http.post(`${this.apiUrl}/register`,t).pipe((0,u.W)(c=>(0,r.$)(()=>c)))}forgotPassword(t){return this.http.post(`${this.apiUrl}/forgot-password`,t).pipe((0,u.W)(c=>(0,r.$)(()=>c)))}isAuthenticated(){return!!localStorage.getItem("token")}clearSession(){localStorage.removeItem("token"),localStorage.removeItem("user"),this._user$.next(null)}getCurrentUser(){const t=localStorage.getItem("user");return t?JSON.parse(t):null}getUserId(){const t=this.getCurrentUser();return t?t.id:null}getRoles(){const t=localStorage.getItem("roles");return t?JSON.parse(t):[]}getPermissions(){const t=localStorage.getItem("permissions");return t?JSON.parse(t):[]}triggerNavigationReload(){this.navigationReloadSource.next(!0)}hasPermission(t){return((this.currentUser||JSON.parse(localStorage.getItem("user")||"{}"))?.permissions||[]).includes(t)}static{this.\u0275fac=function(c){return new(c||o)($.KVO(g.Qq))}}static{this.\u0275prov=$.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})()},5993:(C,S,i)=>{i.d(S,{c:()=>$});var l=i(8810),r=i(6354),a=i(9437),u=i(7175),f=i(4438),v=i(1626);let $=(()=>{class g{constructor(o){this.http=o,this.api=`${u.$.apiUrl}/inventory`}getConfigTables(){return this.http.get(`${this.api}/config-tables`)}loadConfig(o,n={}){return this.http.get(`${this.api}/load-config`,{params:{table_name:o,...n}})}deleteConfig(o,n){return this.http.delete(`${this.api}/delete-config`,{params:{table:o,id:n}})}saveConfig(o){return this.http.post(`${this.api}/save-config`,o)}list(){return this.http.get(`${this.api}`).pipe((0,r.T)(o=>o.data||[]),(0,a.W)(o=>(0,l.$)(()=>o)))}get(o){return this.http.get(`${this.api}/${o}`).pipe((0,r.T)(n=>n.data),(0,a.W)(n=>(0,l.$)(()=>n)))}create(o){return FormData,this.http.post(`${this.api}`,o).pipe((0,r.T)(n=>n.data),(0,a.W)(n=>(0,l.$)(()=>n)))}saveProduct(o){return this.http.post(`${this.api}/saveProduct`,o).pipe((0,r.T)(n=>n.data),(0,a.W)(this.handleError))}deleteProduct(o){return this.http.delete(`${this.api}/${o}`).pipe((0,a.W)(this.handleError))}update(o,n){return n instanceof FormData?this.http.post(`${this.api}/${o}?_method=PUT`,n).pipe((0,r.T)(t=>t.data),(0,a.W)(t=>(0,l.$)(()=>t))):this.http.put(`${this.api}/${o}`,n).pipe((0,r.T)(t=>t.data),(0,a.W)(t=>(0,l.$)(()=>t)))}delete(o){return this.http.delete(`${this.api}/${o}`).pipe((0,a.W)(n=>(0,l.$)(()=>n)))}lowStockProducts(o=10){return this.http.get(`${this.api}/low-stock?limit=${o}`).pipe((0,r.T)(n=>n.data||[]),(0,a.W)(n=>(0,l.$)(()=>n)))}adjustStock(o,n,t,c){return this.http.post(`${this.api}/${o}/adjust-stock`,{delta:n,reason:t,user:c}).pipe((0,r.T)(A=>A),(0,a.W)(A=>(0,l.$)(()=>A)))}addNewStock(o,n){return this.http.post(`${this.api}/${o}/add-stock`,n).pipe((0,r.T)(t=>t?.data??t),(0,a.W)(t=>(0,l.$)(()=>t)))}getStockHistory(o){return this.http.get(`${this.api}/${o}/history`).pipe((0,r.T)(n=>n.data||[]),(0,a.W)(n=>(0,l.$)(()=>n)))}getHistory(o){return this.http.get(`${this.api}/${o}/history`).pipe((0,r.T)(n=>n.data||[]),(0,a.W)(n=>(0,l.$)(()=>n)))}getCategories(){return this.http.get(`${this.api}/categories`).pipe((0,r.T)(o=>o?.data??[]),(0,a.W)(o=>(console.error("Error fetching categories",o),(0,l.$)(()=>o))))}getUnits(){return this.http.get(`${this.api}/units`).pipe((0,r.T)(o=>o?.data??[]),(0,a.W)(o=>(console.error("Error fetching units",o),(0,l.$)(()=>o))))}getPurchaseHistory(o){return this.http.get(`${this.api}/${o}/purchase-history`).pipe((0,r.T)(n=>n.data||[]),(0,a.W)(n=>(0,l.$)(()=>n)))}handleError(o){return console.error("InventoryService error:",o),(0,l.$)(()=>o)}static{this.\u0275fac=function(n){return new(n||g)(f.KVO(v.Qq))}}static{this.\u0275prov=f.jDH({token:g,factory:g.\u0275fac,providedIn:"root"})}}return g})()},9172:(C,S,i)=>{i.d(S,{A:()=>G});var l=i(8168),r=i(7184),a=i(2463),u=i(7276),f=i(4435),v=i(6676),$=i(5767),g=i(5632),T=i(7669),o=i(2535),n=i(4460),t=i(1299);const L=["info","warning","error","success"],W=[],R={top:{my:"top",at:"top",of:null,offset:"0 0"},bottom:{my:"bottom",at:"bottom",of:null,offset:"0 -20"},center:{my:"center",at:"center",of:null,offset:"0 0"},right:{my:"center right",at:"center right",of:null,offset:"0 0"},left:{my:"center left",at:"center left",of:null,offset:"0 0"}},N={h:0,v:0};(0,o.A.add)(()=>{const e=T.A.getDocument();v.A.subscribeGlobal(e,$.A.down,s=>{for(let h=W.length-1;h>=0;h-=1){var p,d;if(null===(p=(d=W[h])._proxiedDocumentDownHandler)||void 0===p||!p.call(d,s))return}})});class P extends n.A{_getDefaultOptions(){return(0,l.A)({},super._getDefaultOptions(),{message:"",type:"info",displayTime:2e3,position:"bottom center",animation:{show:{type:"fade",duration:400,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}},shading:!1,height:"auto",hideTopOverlayHandler:null,preventScrollEvents:!1,closeOnSwipe:!0,closeOnClick:!1})}_defaultOptionsRules(){const s={displayTime:(0,t.Nt)((0,t.ss)())?4e3:2e3,hideOnOutsideClick:!0,animation:{show:{type:"fade",duration:200,from:0,to:1},hide:{type:"fade",duration:200,from:1,to:0}}},p=[{device:h=>"phone"===h.deviceType,options:(0,l.A)({width:"calc(100vw - 40px)"},s)},{device:h=>"tablet"===h.deviceType,options:(0,l.A)({width:"auto",maxWidth:"80vw"},s)},{device:h=>(0,t.Nt)((0,t.ss)())&&"desktop"===h.deviceType,options:{minWidth:344,maxWidth:568,displayTime:4e3}}];return[...super._defaultOptionsRules(),...p]}_init(){super._init(),this._posStringToObject()}_renderContentImpl(){const{message:s,type:p}=this.option();return this._message=(0,r.A)("<div>").addClass("dx-toast-message").text(s??"").appendTo(this.$content()),this.setAria("role","alert",this._message),p&&L.includes(p.toLowerCase())&&this.$content().prepend((0,r.A)("<div>").addClass("dx-toast-icon")),super._renderContentImpl()}_render(){super._render(),this.$element().addClass("dx-toast"),this.$wrapper().addClass("dx-toast-wrapper");const{type:s}=this.option();s&&this.$content().addClass(`dx-toast-${s.toLowerCase()}`),this.$content().addClass("dx-toast-content"),this._toggleCloseEvents("Swipe"),this._toggleCloseEvents("Click")}_toggleCloseEvents(s){const p=`dx${s.toLowerCase()}`;v.A.off(this.$content(),p),this.option(`closeOn${s}`)&&v.A.on(this.$content(),p,this.hide.bind(this))}_posStringToObject(){const{position:s}=this.option();if(!(0,a.Kg)(s))return;const p=s.split(" ")[0],d=s.split(" ")[1],h=(0,l.A)({boundaryOffset:N},R[p]);switch(this.option("position",h),d){case"center":case"left":case"right":if(h&&"object"==typeof h){const O=`${h.my} ${d}`;this.option("position.at",`${h.at} ${d}`),this.option("position.my",O)}}}_show(){const s=super._show();return s.always(()=>{clearTimeout(this._hideTimeout);const{displayTime:p}=this.option();this._hideTimeout=setTimeout(this.hide.bind(this),p)}),s}_overlayStack(){return W}_zIndexInitValue(){return super._zIndexInitValue()+8e3}_dispose(){clearTimeout(this._hideTimeout),super._dispose()}_optionChanged(s){const{name:p,value:d,previousValue:h}=s;switch(p){case"type":this.$content().removeClass(`dx-toast-${h}`),d&&this.$content().addClass(`dx-toast-${String(d).toLowerCase()}`);break;case"message":this._message&&this._message.text(d);break;case"closeOnSwipe":this._toggleCloseEvents("Swipe");break;case"closeOnClick":this._toggleCloseEvents("Click");break;case"displayTime":break;default:super._optionChanged(s)}}}(0,g.A)("dxToast",P);const H=P,D=(0,f.zk)();let x=null;const M={},U={"top left":{top:10,left:10},"top right":{top:10,right:10},"bottom left":{bottom:10,left:10},"bottom right":{bottom:10,right:10},"top center":e=>({top:10,left:Math.round(e.windowWidth/2-e.toastWidth/2)}),"left center":e=>({top:Math.round(e.windowHeight/2-e.toastHeight/2),left:10}),"right center":e=>({top:Math.round(e.windowHeight/2-e.toastHeight/2),right:10}),center:e=>({top:Math.round(e.windowHeight/2-e.toastHeight/2),left:Math.round(e.windowWidth/2-e.toastWidth/2)}),"bottom center":e=>({bottom:10,left:Math.round(e.windowWidth/2-e.toastWidth/2)})},k={up:(e,s)=>({bottom:e.bottom??s.windowHeight-s.toastHeight-(e.top??0),top:"",left:e.left??"",right:e.right??""}),down:(e,s)=>({top:e.top??s.windowHeight-s.toastHeight-(e.bottom??0),bottom:"",left:e.left??"",right:e.right??""}),left:(e,s)=>({right:e.right??s.windowWidth-s.toastWidth-(e.left??0),left:"",top:e.top??"",bottom:e.bottom??""}),right:(e,s)=>({left:e.left??s.windowWidth-s.toastWidth-(e.right??0),right:"",top:e.top??"",bottom:e.bottom??""})},z=(e,s,p)=>{const d=(0,a.Qd)(e)?e:{message:e},h=(0,a.Qd)(s)?s:void 0,y=(0,a.Qd)(s)?void 0:s,{onHidden:O,onShowing:E}=d,w={onHidden:m=>{(0,r.A)(m.element).remove(),O?.(m)}};if(void 0!==y&&(w.type=y),void 0!==p&&(w.displayTime=p),null!=h&&h.position){const{position:m}=h,b=h.direction||(e=>(0,a.Kg)(e)&&e.includes("top")?"down-push":"up-push")(m),I=(e=>M[e]||(e=>{const s=(0,r.A)("<div>").appendTo((0,u.Uq)());return M[e]=s,s})(e))((0,a.Kg)(m)?m:`${m.top}-${m.left}-${m.bottom}-${m.right}`);return((e,s)=>{const p=`dx-toast-stack dx-toast-stack-${s}-direction`;e.removeAttr("class").addClass(p)})(I,b),(0,l.A)({},d,w,{container:I,_skipContentPositioning:!0,onShowing:X=>{((e,s,p)=>{const{offsetWidth:d,offsetHeight:h}=e.children().first().get(0),y={toastWidth:d,toastHeight:h,windowHeight:D.innerHeight,windowWidth:D.innerWidth},O=(0,a.Kg)(p)?((e,s)=>{const p=e?U[e]:U["bottom center"];return"function"==typeof p?p(s):p})(p,y):p,E=((e,s,p)=>{const d=e.replace(/-push|-stack/g,""),h=k[d];return h?h(s,p):{top:"",bottom:"",left:"",right:""}})(s,O,y);e.css(E)})(I,b,m),E?.(X)}})}return(0,l.A)({},d,w)},G=(e,s,p)=>{const d=z(e,s,p);x=(0,r.A)("<div>").appendTo((0,u.Uq)()),new H(x,d).show()}},5110:(C,S,i)=>{i.d(S,{A:()=>$});var l=i(8168),a=(i(9715),i(5632)),u=i(9315);let f=(()=>{class g extends u.A{_getDefaultOptions(){return(0,l.A)({},super._getDefaultOptions(),{preventScrollEvents:!1})}_getToolbarName(){return"dxToolbar"}}return g.defaultOptions=function(T){u.A.defaultOptions(T)},g})();(0,a.A)("dxPopup",f);const $=f}}]);