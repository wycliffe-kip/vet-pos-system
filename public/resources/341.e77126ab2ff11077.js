"use strict";(self.webpackChunkvet_pos_dev=self.webpackChunkvet_pos_dev||[]).push([[341],{3722:(I,v,a)=>{a.r(v),a.d(v,{PublicModule:()=>O});var u=a(177),r=a(9417),m=a(2183),l=a(9172),e=a(4438),f=a(8010);function w(o,d){1&o&&(e.j41(0,"span"),e.EFF(1,"Email is required."),e.k0s())}function C(o,d){1&o&&(e.j41(0,"span"),e.EFF(1,"Enter a valid email."),e.k0s())}function x(o,d){if(1&o&&(e.j41(0,"small"),e.DNE(1,w,2,0,"span",10)(2,C,2,0,"span",10),e.k0s()),2&o){let i,n;const t=e.XpG();e.R7$(),e.Y8G("ngIf",null==(i=t.form.get("email"))||null==i.errors?null:i.errors.required),e.R7$(),e.Y8G("ngIf",null==(n=t.form.get("email"))||null==n.errors?null:n.errors.email)}}function P(o,d){1&o&&e.nrm(0,"span",18)}let _=(()=>{class o{constructor(i,n,t){this.fb=i,this.authService=n,this.router=t,this.loading=!1,this.success=!1,this.currentYear=(new Date).getFullYear(),this.showPassword=!1,this.form=this.fb.group({email:["",[r.k0.required,r.k0.email]],password:["",r.k0.required]})}onSubmit(){this.form.invalid?(0,l.A)("Please fill in all required fields correctly.","warning",2500):(this.loading=!0,this.authService.login(this.form.value).subscribe({next:n=>{if(this.success="success"===n.status,this.message=n.message||"",this.success){const t=n.data.user,s={id:t.user.id,name:t.user.name,email:t.user.email,is_enabled:t.user.is_enabled,roles:t.roles||[],permissions:t.permissions||[],token:n.data.token};this.authService.setUser(s),localStorage.setItem("user_data",JSON.stringify(s)),localStorage.setItem("isLoggedIn","true"),(0,l.A)("Login successful!","success",2e3),this.router.navigate(["/dashboard"])}else(0,l.A)(this.message||"Login failed","error",3e3)},error:n=>{(0,l.A)(n?.error?.message||n?.message||"Login failed. Please try again.","error",3e3),console.error("Login error:",n)},complete:()=>{this.loading=!1}}))}static{this.\u0275fac=function(n){return new(n||o)(e.rXU(r.ok),e.rXU(f.u),e.rXU(m.Ix))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-login"]],decls:25,vars:12,consts:[[1,"login-page"],[1,"login-card"],[1,"logo-section"],["src","assets/vetlogo.png","alt","Vet POS Logo",1,"logo"],[1,"title"],[1,"subtitle"],["novalidate","",1,"form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],["id","email","type","email","formControlName","email","placeholder","Enter your email"],[4,"ngIf"],[1,"form-group","password-toggle"],["for","password"],["id","password","formControlName","password","placeholder","Enter your password",3,"type"],["type","button",1,"toggle-btn",3,"click"],["type","submit",1,"login-btn",3,"disabled"],["class","spinner",4,"ngIf"],[1,"footer"],[1,"spinner"]],template:function(n,t){if(1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2),e.nrm(3,"img",3),e.j41(4,"h2",4),e.EFF(5,"Rono Veterinary POS"),e.k0s(),e.j41(6,"p",5),e.EFF(7,"Your trusted partner in animal care"),e.k0s()(),e.j41(8,"form",6),e.bIt("ngSubmit",function(){return t.onSubmit()}),e.j41(9,"div",7)(10,"label",8),e.EFF(11,"Email"),e.k0s(),e.nrm(12,"input",9),e.DNE(13,x,3,2,"small",10),e.k0s(),e.j41(14,"div",11)(15,"label",12),e.EFF(16,"Password"),e.k0s(),e.nrm(17,"input",13),e.j41(18,"button",14),e.bIt("click",function(){return t.showPassword=!t.showPassword}),e.EFF(19),e.k0s()(),e.j41(20,"button",15),e.DNE(21,P,1,0,"span",16),e.EFF(22),e.k0s()(),e.j41(23,"p",17),e.EFF(24),e.k0s()()()),2&n){let s,c,g;e.R7$(8),e.Y8G("formGroup",t.form),e.R7$(4),e.AVh("invalid",(null==(s=t.form.get("email"))?null:s.invalid)&&(null==(s=t.form.get("email"))?null:s.touched)),e.R7$(),e.Y8G("ngIf",(null==(c=t.form.get("email"))?null:c.invalid)&&(null==(c=t.form.get("email"))?null:c.touched)),e.R7$(4),e.AVh("invalid",(null==(g=t.form.get("password"))?null:g.invalid)&&(null==(g=t.form.get("password"))?null:g.touched)),e.Y8G("type",t.showPassword?"text":"password"),e.R7$(2),e.SpI(" ",t.showPassword?"Hide":"Show"," "),e.R7$(),e.Y8G("disabled",t.loading),e.R7$(),e.Y8G("ngIf",t.loading),e.R7$(),e.SpI(" ",t.loading?"Logging in...":"Login"," "),e.R7$(2),e.SpI("\xa9 ",t.currentYear," Rono Veterinary POS. All rights reserved.")}},dependencies:[u.bT,r.qT,r.me,r.BC,r.cb,r.j4,r.JD],styles:[".login-page[_ngcontent-%COMP%]{min-height:100vh;display:flex;justify-content:center;align-items:center;background:linear-gradient(135deg,#e0f7fa,#e6fffa);font-family:Inter,sans-serif;padding:1rem}.login-card[_ngcontent-%COMP%]{background:#fff;width:100%;max-width:400px;border-radius:1rem;box-shadow:0 8px 30px #0000001a;padding:2.5rem;text-align:center;animation:_ngcontent-%COMP%_fadeIn .4s ease-in-out}.logo-section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.logo[_ngcontent-%COMP%]{width:70px;height:70px;object-fit:contain;margin-bottom:.5rem}.title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#004d40;margin-bottom:.25rem}.subtitle[_ngcontent-%COMP%]{font-size:.95rem;color:#64748b}.form[_ngcontent-%COMP%]{text-align:left;margin-top:1rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}label[_ngcontent-%COMP%]{display:block;font-size:.9rem;color:#374151;margin-bottom:.4rem;font-weight:600}input[_ngcontent-%COMP%]{width:100%;padding:.7rem .9rem;font-size:.95rem;border:1.5px solid #d1d5db;border-radius:.5rem;outline:none;transition:border-color .2s,box-shadow .2s}input[_ngcontent-%COMP%]:focus{border-color:#10b981;box-shadow:0 0 0 3px #10b98133}input.invalid[_ngcontent-%COMP%]{border-color:#ef4444}small[_ngcontent-%COMP%]{color:#ef4444;font-size:.8rem}.login-btn[_ngcontent-%COMP%]{width:100%;background-color:#10b981;color:#fff;padding:.8rem;border:none;border-radius:.5rem;font-weight:600;font-size:1rem;cursor:pointer;transition:background-color .3s,transform .1s;display:flex;align-items:center;justify-content:center}.login-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#059669;transform:translateY(-1px)}.login-btn[_ngcontent-%COMP%]:disabled{background-color:#9ca3af;cursor:not-allowed}.spinner[_ngcontent-%COMP%]{border:3px solid #e5e7eb;border-top:3px solid white;border-radius:50%;width:18px;height:18px;margin-right:8px;animation:_ngcontent-%COMP%_spin .8s linear infinite}.footer[_ngcontent-%COMP%]{margin-top:1.5rem;font-size:.8rem;color:#6b7280;text-align:center}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(15px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 480px){.login-card[_ngcontent-%COMP%]{padding:1.8rem}.title[_ngcontent-%COMP%]{font-size:1.3rem}input[_ngcontent-%COMP%]{font-size:.9rem}}"]})}}return o})();var p=a(5853),h=a(5506),b=a(6382);function y(o,d){1&o&&(e.j41(0,"div",9),e.nrm(1,"dx-load-indicator",10),e.k0s()),2&o&&(e.R7$(),e.Y8G("visible",!0))}let k=(()=>{class o{constructor(i,n){this.fb=i,this.authService=n,this.loading=!1,this.form=this.fb.group({email:["",[r.k0.required,r.k0.email]]})}onSubmit(){this.form.invalid?(0,l.A)("Please enter a valid email address.","warning",2e3):(this.loading=!0,this.authService.forgotPassword(this.form.value).subscribe({next:()=>{this.loading=!1,(0,l.A)("Password reset instructions sent to your email.","success",2500)},error:i=>{this.loading=!1,(0,l.A)("Email not found. Try again.","error",3e3),console.error(i)}}))}static{this.\u0275fac=function(n){return new(n||o)(e.rXU(r.ok),e.rXU(f.u))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-forgot-password"]],decls:12,vars:3,consts:[[1,"flex","flex-col","items-center","justify-center","min-h-screen","bg-gray-50","p-4"],[1,"w-full","max-w-md","bg-white","rounded-2xl","shadow-lg","p-6"],[1,"text-2xl","font-bold","text-center","text-gray-700","mb-6"],[1,"space-y-4",3,"ngSubmit","formGroup"],["formControlName","email","placeholder","Email Address","mode","email",3,"showClearButton"],["text","Send Reset Link","type","default","stylingMode","contained","width","100%",3,"onClick"],["class","flex justify-center mt-4",4,"ngIf"],[1,"text-sm","text-gray-500","text-center","mt-4"],["routerLink","/auth/login",1,"text-green-600"],[1,"flex","justify-center","mt-4"],[3,"visible"]],template:function(n,t){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"h2",2),e.EFF(3,"Forgot Password"),e.k0s(),e.j41(4,"form",3),e.bIt("ngSubmit",function(){return t.onSubmit()}),e.nrm(5,"dx-text-box",4),e.j41(6,"dx-button",5),e.bIt("onClick",function(){return t.onSubmit()}),e.k0s(),e.DNE(7,y,2,1,"div",6),e.j41(8,"p",7),e.EFF(9," Remembered your password? "),e.j41(10,"a",8),e.EFF(11,"Login"),e.k0s()()()()()),2&n&&(e.R7$(4),e.Y8G("formGroup",t.form),e.R7$(),e.Y8G("showClearButton",!0),e.R7$(2),e.Y8G("ngIf",t.loading))},dependencies:[u.bT,r.qT,r.BC,r.cb,r.j4,r.JD,m.Wk,p.m7,h.e,b.B]})}}return o})();function F(o,d){if(1&o&&(e.j41(0,"div",9),e.nrm(1,"dx-load-indicator",10),e.k0s()),2&o){const i=e.XpG();e.R7$(),e.Y8G("visible",i.loading)}}const S=[{path:"login",component:_},{path:"register",component:(()=>{class o{constructor(i,n,t){this.fb=i,this.authService=n,this.router=t,this.loading=!1,this.form=this.fb.group({name:["",r.k0.required],email:["",[r.k0.required,r.k0.email]],password:["",[r.k0.required,r.k0.minLength(6)]],confirmPassword:["",r.k0.required]})}onSubmit(){if(this.form.invalid)return void(0,l.A)("Please complete the form correctly.","warning",2e3);if(this.form.value.password!==this.form.value.confirmPassword)return void(0,l.A)("Passwords do not match.","error",2e3);this.loading=!0;const{name:i,email:n,password:t}=this.form.value;this.authService.register({name:i,email:n,password:t}).subscribe({next:()=>{this.loading=!1,(0,l.A)("Registration successful! You can now login.","success",2e3),this.router.navigate(["/auth/login"])},error:s=>{this.loading=!1,(0,l.A)("Registration failed. Try again.","error",3e3),console.error(s)}})}static{this.\u0275fac=function(n){return new(n||o)(e.rXU(r.ok),e.rXU(f.u),e.rXU(m.Ix))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-register"]],decls:11,vars:5,consts:[[1,"space-y-4",3,"ngSubmit","formGroup"],["formControlName","name","placeholder","Full Name",3,"showClearButton"],["formControlName","email","placeholder","Email","mode","email",3,"showClearButton"],["formControlName","password","placeholder","Password","mode","password"],["formControlName","confirmPassword","placeholder","Confirm Password","mode","password"],["text","Register","type","success","stylingMode","contained","width","100%",3,"useSubmitBehavior"],["class","mt-4",4,"ngIf"],[1,"text-center","mt-4"],["routerLink","/auth/login",1,"text-green-600"],[1,"mt-4"],[3,"visible"]],template:function(n,t){1&n&&(e.j41(0,"form",0),e.bIt("ngSubmit",function(){return t.onSubmit()}),e.nrm(1,"dx-text-box",1)(2,"dx-text-box",2)(3,"dx-text-box",3)(4,"dx-text-box",4)(5,"dx-button",5),e.DNE(6,F,2,1,"div",6),e.k0s(),e.j41(7,"p",7),e.EFF(8," Already have an account? "),e.j41(9,"a",8),e.EFF(10,"Login"),e.k0s()()),2&n&&(e.Y8G("formGroup",t.form),e.R7$(),e.Y8G("showClearButton",!0),e.R7$(),e.Y8G("showClearButton",!0),e.R7$(3),e.Y8G("useSubmitBehavior",!0),e.R7$(),e.Y8G("ngIf",t.loading))},dependencies:[u.bT,r.qT,r.BC,r.cb,r.j4,r.JD,m.Wk,p.m7,h.e,b.B]})}}return o})()},{path:"forgot-password",component:k}];let j=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275mod=e.$C({type:o})}static{this.\u0275inj=e.G2t({imports:[m.iI.forChild(S),m.iI]})}}return o})();var R=a(5619),M=a(4104);let O=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275mod=e.$C({type:o})}static{this.\u0275inj=e.G2t({imports:[u.MD,r.YN,r.X1,j,p.ZL,h.L,b.S,R.Lp,M._r]})}}return o})()}}]);